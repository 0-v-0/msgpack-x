# msgpack-x

A wasm implementation of [MessagePack](http://msgpack.org)

## Usage

```js
const { encode, decode } = require('msgpack-x');

let encoded = notepack.encode({ foo: 'bar' }); // Uint8Array<81 a3 66 6f 6f a3 62 61 72>
let decoded = notepack.decode(encoded); // { foo: 'bar' }
```

## Performance

Test machine: Intel Xeon E5-2689@2.60GHz DDR3 1600MHz

```
$ node -v
v17.9.0
$ cd ./benchmarks
$ node encode
+----------------------------+-----------------+-----------------+----------------+---------------+
|                            │ tiny            │ small           │ medium         │ large         |
+----------------------------+-----------------+-----------------+----------------+---------------+
| msgpack-x                  │ 91,165 ops/sec  │ 21,248 ops/sec  │ 2,395 ops/sec  │ 50.51 ops/sec |
+----------------------------+-----------------+-----------------+----------------+---------------+
| msgpack-js                 │ 26,886 ops/sec  │ 44,077 ops/sec  │ 1,382 ops/sec  │ 1.46 ops/sec  |
+----------------------------+-----------------+-----------------+----------------+---------------+
| msgpack-lite               │ 250,529 ops/sec │ 84,027 ops/sec  │ 8,215 ops/sec  │ 180 ops/sec   |
+----------------------------+-----------------+-----------------+----------------+---------------+
| @ygoe/msgpack              │ 432,155 ops/sec │ 119,700 ops/sec │ 12,894 ops/sec │ 49.57 ops/sec |
+----------------------------+-----------------+-----------------+----------------+---------------+
| @msgpack/msgpack           │ 581,430 ops/sec │ 306,957 ops/sec │ 29,246 ops/sec │ 113 ops/sec   |
+----------------------------+-----------------+-----------------+----------------+---------------+
| JSON.stringify (to Buffer) │ 695,184 ops/sec │ 145,121 ops/sec │ 10,674 ops/sec │ 12.14 ops/sec |
+----------------------------+-----------------+-----------------+----------------+---------------+

$ node decode
+--------------------------+-------------------+-----------------+----------------+---------------+
|                          │ tiny              │ small           │ medium         │ large         |
+--------------------------+-------------------+-----------------+----------------+---------------+
| msgpack-x                │ 102,623 ops/sec   │ 28,613 ops/sec  │ 3,113 ops/sec  │ 49.22 ops/sec |
+--------------------------+-------------------+-----------------+----------------+---------------+
| msgpack-js               │ 546,819 ops/sec   │ 89,427 ops/sec  │ 2,725 ops/sec  │ 3.14 ops/sec  |
+--------------------------+-------------------+-----------------+----------------+---------------+
| msgpack-lite             │ 561,157 ops/sec   │ 91,237 ops/sec  │ 5,752 ops/sec  │ 5.82 ops/sec  |
+--------------------------+-------------------+-----------------+----------------+---------------+
| @ygoe/msgpack            │ 1,734,955 ops/sec │ 328,985 ops/sec │ 16,538 ops/sec │ 12.59 ops/sec |
+--------------------------+-------------------+-----------------+----------------+---------------+
| @msgpack/msgpack         │ 1,304,651 ops/sec │ 436,017 ops/sec │ 20,190 ops/sec │ 57.37 ops/sec |
+--------------------------+-------------------+-----------------+----------------+---------------+
| JSON.parse (from Buffer) │ 822,417 ops/sec   │ 269,445 ops/sec │ 23,767 ops/sec │ 29.52 ops/sec |
+--------------------------+-------------------+-----------------+----------------+---------------+
```
